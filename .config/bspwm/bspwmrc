#! /bin/sh

col0=#2d2426
col1=#d49369
col2=#8ac1d4
col3=#CE9078
col4=#6C7986
col5=#f68d5c
col6=#91bfcf
col7=#ded8d6
col8=#6c5c5d
col9=#ffdea8
col10=#93d8f1
col11=#ffb186
col12=#7c9dbd
col13=#ffba73 
col14=#caf0fd
col15=#fffcfa
colinac=#637d97
colact=#445667

####################################
###### Getting things started ######
####################################

# Arrange monitors and create desktops
if [ $(hostname) = "astro" ]; then
	setupmonitors
	bspc monitor HDMI-A-0 -d I II III IV V VI VII
	bspc monitor DisplayPort-1 -d  VIII IX X
elif [ $(hostname) = "EVA-01" ]; then
	bspc monitor -d I II III IV V VI VII VIII IX X
fi

# Program startup routine
bspstart

# Set some colors 
bspc config normal_border_color "$colinac"
bspc config focused_border_color "$col2"
bspc config presel_feedback_color "$col3"

bspc config border_width         4
bspc config window_gap          10

bspc config split_ratio          0.50
bspc config borderless_monocle   true
bspc config gapless_monocle      true

## Window Rules
bspc rule -a Zathura state=tiled
bspc rule -a Transmission-gtk desktop=X
bspc rule -a qBittorrent desktop=X 
bspc rule -a TelegramDesktop state=floating desktop=IX 
bspc rule -a Anki state=floating
bspc rule -a Pixinsight state=floating
bspc rule -a Gimp state=floating
bspc rule -a subs2srs state=floating rectangle=1038x865+398+106

# Scratchpad rules
bspc rule -a scterm sticky=on state=floating rectangle=710x360+1195+710 hidden=on
bspc rule -a scfm sticky=on state=floating rectangle=710x360+1195+410 hidden=on

## Launch scratchpad terminal if not already present
if [ -z "$(xdotool search --class scterm)" ];
then
	alacritty --class alacritty,scterm &
fi
# Same for scratchpad file manager
if [ -z "$(xdotool search --class scfm)" ];
then
	alacritty --class alacritty,scfm -e ranger &
fi

## Window swallowing
pidof bspswallow || bspswallow &
